{
  "content": "// src/cxm.ts\nfunction splitClassName(className) {\n  const segments = [];\n  let current = \"\";\n  let bracketDepth = 0;\n  for (let i = 0; i < className.length; i++) {\n    const ch = className[i];\n    if (ch === \"[\") {\n      bracketDepth++;\n      current += ch;\n    } else if (ch === \"]\") {\n      bracketDepth--;\n      current += ch;\n    } else if (ch === \":\" && bracketDepth === 0) {\n      if (current) segments.push(current);\n      current = \"\";\n    } else {\n      current += ch;\n    }\n  }\n  if (current) segments.push(current);\n  return segments;\n}\nfunction getMergeKey(className, separator) {\n  let cls = className;\n  if (cls.endsWith(\"!\")) {\n    cls = cls.slice(0, -1);\n  }\n  const segments = splitClassName(cls);\n  if (segments.length === 0) return null;\n  const last = segments[segments.length - 1];\n  const sepIdx = last.indexOf(separator);\n  if (sepIdx < 1) return null;\n  const property = last.slice(0, sepIdx);\n  if (segments.length === 1) {\n    return property;\n  }\n  const conditions = segments.slice(0, -1).join(\":\");\n  return conditions + \":\" + property;\n}\nfunction cxm(separator, ...classes) {\n  const seen = /* @__PURE__ */ new Map();\n  const order = [];\n  let id = 0;\n  for (const cls of classes) {\n    if (!cls) continue;\n    for (const token of cls.split(\" \")) {\n      if (!token) continue;\n      const key = getMergeKey(token, separator);\n      if (key !== null) {\n        if (!seen.has(key)) order.push(key);\n        seen.set(key, token);\n      } else {\n        const uniqueKey = `__` + id++;\n        order.push(uniqueKey);\n        seen.set(uniqueKey, token);\n      }\n    }\n  }\n  let str = \"\";\n  for (let i = 0; i < order.length; i++) {\n    if (str) str += \" \";\n    str += seen.get(order[i]);\n  }\n  return str;\n}\nexport {\n  cxm,\n  getMergeKey,\n  splitClassName\n};\n"
}